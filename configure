#!/bin/sh
# This script generates a Makefile for building the server application

# Check for pthreads support
if ! echo "#include <pthread.h>\nint main() { return 0; }" | gcc -x c - -o /dev/null -lpthread -v 2>/dev/null; then
    echo "Error: pthreads library not found. Please install pthreads development package."
    exit 1
fi

cat << 'EOF' > Makefile
# Auto-generated Makefile

# Compiler and flags
CC = gcc
CFLAGS = -Wall -Wextra
LDFLAGS = -lpthread

# Target to build the server executable
server: server.c
	\$(CC) \$(CFLAGS) -o server server.c \$(LDFLAGS)

# Clean target to remove the built executable
clean:
	@rm -f server

.PHONY: clean
EOF

echo "Makefile created successfully."

